<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: StringIO</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">StringIO</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/stringio/stringio_c.html">
                stringio/stringio.c
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Data
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Pseudo I/O on String object.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M001310">&lt;&lt;</a>&nbsp;&nbsp;
      <a href="#M001278">binmode</a>&nbsp;&nbsp;
      <a href="#M001279">close</a>&nbsp;&nbsp;
      <a href="#M001280">close_read</a>&nbsp;&nbsp;
      <a href="#M001281">close_write</a>&nbsp;&nbsp;
      <a href="#M001282">closed?</a>&nbsp;&nbsp;
      <a href="#M001283">closed_read?</a>&nbsp;&nbsp;
      <a href="#M001284">closed_write?</a>&nbsp;&nbsp;
      <a href="#M001298">each</a>&nbsp;&nbsp;
      <a href="#M001299">each_byte</a>&nbsp;&nbsp;
      <a href="#M001300">each_line</a>&nbsp;&nbsp;
      <a href="#M001285">eof</a>&nbsp;&nbsp;
      <a href="#M001286">eof?</a>&nbsp;&nbsp;
      <a href="#M001287">fcntl</a>&nbsp;&nbsp;
      <a href="#M001319">fileno</a>&nbsp;&nbsp;
      <a href="#M001288">flush</a>&nbsp;&nbsp;
      <a href="#M001289">fsync</a>&nbsp;&nbsp;
      <a href="#M001301">getc</a>&nbsp;&nbsp;
      <a href="#M001304">gets</a>&nbsp;&nbsp;
      <a href="#M001316">isatty</a>&nbsp;&nbsp;
      <a href="#M001321">length</a>&nbsp;&nbsp;
      <a href="#M001276">lineno</a>&nbsp;&nbsp;
      <a href="#M001277">lineno=</a>&nbsp;&nbsp;
      <a href="#M001272">new</a>&nbsp;&nbsp;
      <a href="#M001271">open</a>&nbsp;&nbsp;
      <a href="#M001297">path</a>&nbsp;&nbsp;
      <a href="#M001318">pid</a>&nbsp;&nbsp;
      <a href="#M001290">pos</a>&nbsp;&nbsp;
      <a href="#M001291">pos=</a>&nbsp;&nbsp;
      <a href="#M001311">print</a>&nbsp;&nbsp;
      <a href="#M001312">printf</a>&nbsp;&nbsp;
      <a href="#M001313">putc</a>&nbsp;&nbsp;
      <a href="#M001314">puts</a>&nbsp;&nbsp;
      <a href="#M001307">read</a>&nbsp;&nbsp;
      <a href="#M001303">readchar</a>&nbsp;&nbsp;
      <a href="#M001305">readline</a>&nbsp;&nbsp;
      <a href="#M001306">readlines</a>&nbsp;&nbsp;
      <a href="#M001273">reopen</a>&nbsp;&nbsp;
      <a href="#M001292">rewind</a>&nbsp;&nbsp;
      <a href="#M001293">seek</a>&nbsp;&nbsp;
      <a href="#M001320">size</a>&nbsp;&nbsp;
      <a href="#M001274">string</a>&nbsp;&nbsp;
      <a href="#M001275">string=</a>&nbsp;&nbsp;
      <a href="#M001294">sync</a>&nbsp;&nbsp;
      <a href="#M001295">sync=</a>&nbsp;&nbsp;
      <a href="#M001308">sysread</a>&nbsp;&nbsp;
      <a href="#M001315">syswrite</a>&nbsp;&nbsp;
      <a href="#M001296">tell</a>&nbsp;&nbsp;
      <a href="#M001322">truncate</a>&nbsp;&nbsp;
      <a href="#M001317">tty?</a>&nbsp;&nbsp;
      <a href="#M001302">ungetc</a>&nbsp;&nbsp;
      <a href="#M001309">write</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name">Enumerable</span>
      </div>
    </div>

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M001272" class="method-detail">
        <a name="M001272"></a>

        <div class="method-heading">
          <a href="#M001272" class="method-signature">
          <span class="method-name"> StringIO.new(string=""[, mode])<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="StringIO.html#M001272">new</a> <a
href="StringIO.html">StringIO</a> instance from with <em><a
href="StringIO.html#M001274">string</a></em> and <em>mode</em>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001272-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001272-source">
<pre>
/*
 * call-seq: StringIO.new(string=&quot;&quot;[, mode])
 *
 * Creates new StringIO instance from with _string_ and _mode_.
 */
static VALUE
strio_initialize(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = check_strio(self);

    if (!ptr) {
        DATA_PTR(self) = ptr = strio_alloc();
    }
    rb_call_super(0, 0);
    strio_init(argc, argv, ptr);
    return self;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001271" class="method-detail">
        <a name="M001271"></a>

        <div class="method-heading">
          <a href="#M001271" class="method-signature">
          <span class="method-name"> StringIO.open(string=""[, mode]) {|strio| ...}<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Equivalent to <a href="StringIO.html#M001272">StringIO.new</a> except that
when it is called with a block, it yields with the <a
href="StringIO.html#M001272">new</a> instance and closes it, and returns
the result which returned from the block.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001271-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001271-source">
<pre>
/*
 * call-seq: StringIO.open(string=&quot;&quot;[, mode]) {|strio| ...}
 *
 * Equivalent to StringIO.new except that when it is called with a block, it
 * yields with the new instance and closes it, and returns the result which
 * returned from the block.
 */
static VALUE
strio_s_open(argc, argv, klass)
    int argc;
    VALUE *argv;
    VALUE klass;
{
    VALUE obj = rb_class_new_instance(argc, argv, klass);
    if (!rb_block_given_p()) return obj;
    return rb_ensure(rb_yield, obj, strio_finalize, obj);
}
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M001310" class="method-detail">
        <a name="M001310"></a>

        <div class="method-heading">
          <span class="method-name">strio << obj     &rarr; strio<br />
</span>
        </div>
      
        <div class="method-description">
          <p>
See IO#&lt;&lt;.
</p>
        </div>
      </div>

      <div id="method-M001278" class="method-detail">
        <a name="M001278"></a>

        <div class="method-heading">
          <a href="#M001278" class="method-signature">
          <span class="method-name"> strio.binmode &rarr; true </span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <b>strio</b> itself. Just for compatibility to IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001278-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001278-source">
<pre>
/*
 * Returns *strio* itself.  Just for compatibility to IO.
 */
static VALUE
strio_self(self)
    VALUE self;
{
    StringIO(self);
    return self;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001279" class="method-detail">
        <a name="M001279"></a>

        <div class="method-heading">
          <a href="#M001279" class="method-signature">
          <span class="method-name">strio.close  &rarr; nil<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Closes strio. The <b>strio</b> is unavailable for any further data
operations; an <tt>IOError</tt> is raised if such an attempt is made.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001279-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001279-source">
<pre>
/*
 * call-seq:
 *   strio.close  -&gt; nil
 *
 * Closes strio.  The *strio* is unavailable for any further data 
 * operations; an +IOError+ is raised if such an attempt is made.
 */
static VALUE
strio_close(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (CLOSED(ptr)) {
        rb_raise(rb_eIOError, &quot;closed stream&quot;);
    }
    ptr-&gt;flags &amp;= ~FMODE_READWRITE;
    return Qnil;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001280" class="method-detail">
        <a name="M001280"></a>

        <div class="method-heading">
          <a href="#M001280" class="method-signature">
          <span class="method-name">strio.close_read    &rarr; nil<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Closes the <a href="StringIO.html#M001307">read</a> end of a <a
href="StringIO.html">StringIO</a>. Will raise an <tt>IOError</tt> if the
<b>strio</b> is not readable.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001280-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001280-source">
<pre>
/*
 * call-seq:
 *   strio.close_read    -&gt; nil
 *
 * Closes the read end of a StringIO.  Will raise an +IOError+ if the
 * *strio* is not readable.
 */
static VALUE
strio_close_read(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (!READABLE(ptr)) {
        rb_raise(rb_eIOError, &quot;closing non-duplex IO for reading&quot;);
    }
    ptr-&gt;flags &amp;= ~FMODE_READABLE;
    return Qnil;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001281" class="method-detail">
        <a name="M001281"></a>

        <div class="method-heading">
          <a href="#M001281" class="method-signature">
          <span class="method-name">strio.close_write    &rarr; nil<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Closes the <a href="StringIO.html#M001309">write</a> end of a <a
href="StringIO.html">StringIO</a>. Will raise an <tt>IOError</tt> if the
<b>strio</b> is not writeable.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001281-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001281-source">
<pre>
/*
 * call-seq:
 *   strio.close_write    -&gt; nil
 *
 * Closes the write end of a StringIO.  Will raise an  +IOError+ if the
 * *strio* is not writeable.
 */
static VALUE
strio_close_write(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (!WRITABLE(ptr)) {
        rb_raise(rb_eIOError, &quot;closing non-duplex IO for writing&quot;);
    }
    ptr-&gt;flags &amp;= ~FMODE_WRITABLE;
    return Qnil;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001282" class="method-detail">
        <a name="M001282"></a>

        <div class="method-heading">
          <a href="#M001282" class="method-signature">
          <span class="method-name">strio.closed?    &rarr; true or false<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>true</tt> if <b>strio</b> is completely closed, <tt>false</tt>
otherwise.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001282-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001282-source">
<pre>
/*
 * call-seq:
 *   strio.closed?    -&gt; true or false
 *
 * Returns +true+ if *strio* is completely closed, +false+ otherwise.
 */
static VALUE
strio_closed(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (!CLOSED(ptr)) return Qfalse;
    return Qtrue;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001283" class="method-detail">
        <a name="M001283"></a>

        <div class="method-heading">
          <a href="#M001283" class="method-signature">
          <span class="method-name">strio.closed_read?    &rarr; true or false<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>true</tt> if <b>strio</b> is not readable, <tt>false</tt>
otherwise.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001283-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001283-source">
<pre>
/*
 * call-seq:
 *   strio.closed_read?    -&gt; true or false
 *
 * Returns +true+ if *strio* is not readable, +false+ otherwise.
 */
static VALUE
strio_closed_read(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (READABLE(ptr)) return Qfalse;
    return Qtrue;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001284" class="method-detail">
        <a name="M001284"></a>

        <div class="method-heading">
          <a href="#M001284" class="method-signature">
          <span class="method-name">strio.closed_write?    &rarr; true or false<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>true</tt> if <b>strio</b> is not writable, <tt>false</tt>
otherwise.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001284-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001284-source">
<pre>
/*
 * call-seq:
 *   strio.closed_write?    -&gt; true or false
 *
 * Returns +true+ if *strio* is not writable, +false+ otherwise.
 */
static VALUE
strio_closed_write(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (WRITABLE(ptr)) return Qfalse;
    return Qtrue;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001298" class="method-detail">
        <a name="M001298"></a>

        <div class="method-heading">
          <a href="#M001298" class="method-signature">
          <span class="method-name">strio.each(sep_string=$/)      {|line| block }  &rarr; strio<br />
strio.each_line(sep_string=$/) {|line| block }  &rarr; strio<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#each.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001298-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001298-source">
<pre>
/*
 * call-seq:
 *   strio.each(sep_string=$/)      {|line| block }  -&gt; strio
 *   strio.each_line(sep_string=$/) {|line| block }  -&gt; strio
 *
 * See IO#each.
 */
static VALUE
strio_each(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    VALUE line;

    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_yield(line);
    }
    return self;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001299" class="method-detail">
        <a name="M001299"></a>

        <div class="method-heading">
          <a href="#M001299" class="method-signature">
          <span class="method-name">strio.each_byte {|byte| block }  &rarr; strio<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#each_byte.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001299-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001299-source">
<pre>
/*
 * call-seq:
 *   strio.each_byte {|byte| block }  -&gt; strio
 *
 * See IO#each_byte.
 */
static VALUE
strio_each_byte(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    while (ptr-&gt;pos &lt; RSTRING(ptr-&gt;string)-&gt;len) {
        char c = RSTRING(ptr-&gt;string)-&gt;ptr[ptr-&gt;pos++];
        rb_yield(CHR2FIX(c));
    }
    return Qnil;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001300" class="method-detail">
        <a name="M001300"></a>

        <div class="method-heading">
          <a href="#M001300" class="method-signature">
          <span class="method-name">strio.each(sep_string=$/)      {|line| block }  &rarr; strio<br />
strio.each_line(sep_string=$/) {|line| block }  &rarr; strio<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#each.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001300-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001300-source">
<pre>
/*
 * call-seq:
 *   strio.each(sep_string=$/)      {|line| block }  -&gt; strio
 *   strio.each_line(sep_string=$/) {|line| block }  -&gt; strio
 *
 * See IO#each.
 */
static VALUE
strio_each(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    VALUE line;

    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_yield(line);
    }
    return self;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001285" class="method-detail">
        <a name="M001285"></a>

        <div class="method-heading">
          <a href="#M001285" class="method-signature">
          <span class="method-name">strio.eof     &rarr; true or false<br />
strio.eof?    &rarr; true or false<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if <b>strio</b> is at end of file. The stringio must be opened
for reading or an <tt>IOError</tt> will be raised.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001285-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001285-source">
<pre>
/*
 * call-seq:
 *   strio.eof     -&gt; true or false
 *   strio.eof?    -&gt; true or false
 *
 * Returns true if *strio* is at end of file. The stringio must be  
 * opened for reading or an +IOError+ will be raised.
 */
static VALUE
strio_eof(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    if (ptr-&gt;pos &lt; RSTRING(ptr-&gt;string)-&gt;len) return Qfalse;
    return Qtrue;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001286" class="method-detail">
        <a name="M001286"></a>

        <div class="method-heading">
          <a href="#M001286" class="method-signature">
          <span class="method-name">strio.eof     &rarr; true or false<br />
strio.eof?    &rarr; true or false<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if <b>strio</b> is at end of file. The stringio must be opened
for reading or an <tt>IOError</tt> will be raised.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001286-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001286-source">
<pre>
/*
 * call-seq:
 *   strio.eof     -&gt; true or false
 *   strio.eof?    -&gt; true or false
 *
 * Returns true if *strio* is at end of file. The stringio must be  
 * opened for reading or an +IOError+ will be raised.
 */
static VALUE
strio_eof(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    if (ptr-&gt;pos &lt; RSTRING(ptr-&gt;string)-&gt;len) return Qfalse;
    return Qtrue;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001287" class="method-detail">
        <a name="M001287"></a>

        <div class="method-heading">
          <a href="#M001287" class="method-signature">
          <span class="method-name"> strio.fcntl </span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Raises NotImplementedError.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001287-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001287-source">
<pre>
/*
 * Raises NotImplementedError.
 */
static VALUE
strio_unimpl(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    StringIO(self);
    rb_notimplement();
    return Qnil;                /* not reached */
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001319" class="method-detail">
        <a name="M001319"></a>

        <div class="method-heading">
          <a href="#M001319" class="method-signature">
          <span class="method-name"> strio.fileno &rarr; nil </span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>nil</tt>. Just for compatibility to IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001319-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001319-source">
<pre>
/*
 * Returns +nil+.  Just for compatibility to IO.
 */
static VALUE
strio_nil(self)
    VALUE self;
{
    StringIO(self);
    return Qnil;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001288" class="method-detail">
        <a name="M001288"></a>

        <div class="method-heading">
          <a href="#M001288" class="method-signature">
          <span class="method-name"> strio.flush &rarr; strio </span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <b>strio</b> itself. Just for compatibility to IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001288-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001288-source">
<pre>
/*
 * Returns *strio* itself.  Just for compatibility to IO.
 */
static VALUE
strio_self(self)
    VALUE self;
{
    StringIO(self);
    return self;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001289" class="method-detail">
        <a name="M001289"></a>

        <div class="method-heading">
          <a href="#M001289" class="method-signature">
          <span class="method-name"> strio.fsync &rarr; 0 </span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns 0. Just for compatibility to IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001289-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001289-source">
<pre>
/*
 * Returns 0.  Just for compatibility to IO.
 */
static VALUE
strio_0(self)
    VALUE self;
{
    StringIO(self);
    return INT2FIX(0);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001301" class="method-detail">
        <a name="M001301"></a>

        <div class="method-heading">
          <a href="#M001301" class="method-signature">
          <span class="method-name">strio.getc   &rarr; fixnum or nil<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#getc.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001301-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001301-source">
<pre>
/*
 * call-seq:
 *   strio.getc   -&gt; fixnum or nil
 *
 * See IO#getc.
 */
static VALUE
strio_getc(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    int c;
    if (ptr-&gt;pos &gt;= RSTRING(ptr-&gt;string)-&gt;len) {
        ptr-&gt;flags |= STRIO_EOF;
        return Qnil;
    }
    c = RSTRING(ptr-&gt;string)-&gt;ptr[ptr-&gt;pos++];
    return CHR2FIX(c);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001304" class="method-detail">
        <a name="M001304"></a>

        <div class="method-heading">
          <a href="#M001304" class="method-signature">
          <span class="method-name">strio.gets(sep_string=$/)   &rarr; string or nil<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#gets.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001304-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001304-source">
<pre>
/*
 * call-seq:
 *   strio.gets(sep_string=$/)   -&gt; string or nil
 *
 * See IO#gets.
 */
static VALUE
strio_gets(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE str = strio_getline(argc, argv, readable(StringIO(self)));

    rb_lastline_set(str);
    return str;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001316" class="method-detail">
        <a name="M001316"></a>

        <div class="method-heading">
          <a href="#M001316" class="method-signature">
          <span class="method-name">strio.isatty &rarr; nil<br />
strio.tty? &rarr; nil<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>false</tt>. Just for compatibility to IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001316-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001316-source">
<pre>
/*
 * Returns +false+.  Just for compatibility to IO.
 */
static VALUE
strio_false(self)
    VALUE self;
{
    StringIO(self);
    return Qfalse;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001321" class="method-detail">
        <a name="M001321"></a>

        <div class="method-heading">
          <a href="#M001321" class="method-signature">
          <span class="method-name">strio.size   &rarr; integer<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="StringIO.html#M001320">size</a> of the buffer <a
href="StringIO.html#M001274">string</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001321-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001321-source">
<pre>
/*
 * call-seq:
 *   strio.size   -&gt; integer
 *
 * Returns the size of the buffer string.
 */
static VALUE
strio_size(self)
    VALUE self;
{
    VALUE string = StringIO(self)-&gt;string;
    if (NIL_P(string)) {
        rb_raise(rb_eIOError, &quot;not opened&quot;);
    }
    return ULONG2NUM(RSTRING(string)-&gt;len);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001276" class="method-detail">
        <a name="M001276"></a>

        <div class="method-heading">
          <a href="#M001276" class="method-signature">
          <span class="method-name">strio.lineno    &rarr; integer<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the current line number in <b>strio</b>. The stringio must be
opened for reading. <tt><a href="StringIO.html#M001276">lineno</a></tt>
counts the number of times <tt><a
href="StringIO.html#M001304">gets</a></tt> is called, rather than the
number of newlines encountered. The two values will differ if <tt><a
href="StringIO.html#M001304">gets</a></tt> is called with a separator other
than newline. See also the <tt>$.</tt> variable.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001276-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001276-source">
<pre>
/*
 * call-seq:
 *   strio.lineno    -&gt; integer
 *
 * Returns the current line number in *strio*. The stringio must be
 * opened for reading. +lineno+ counts the number of times  +gets+ is
 * called, rather than the number of newlines  encountered. The two
 * values will differ if +gets+ is  called with a separator other than
 * newline.  See also the  &lt;code&gt;$.&lt;/code&gt; variable.
 */
static VALUE
strio_get_lineno(self)
    VALUE self;
{
    return LONG2NUM(StringIO(self)-&gt;lineno);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001277" class="method-detail">
        <a name="M001277"></a>

        <div class="method-heading">
          <a href="#M001277" class="method-signature">
          <span class="method-name">strio.lineno = integer    &rarr; integer<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Manually sets the current line number to the given value. <tt>$.</tt> is
updated only on the next <a href="StringIO.html#M001307">read</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001277-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001277-source">
<pre>
/*
 * call-seq:
 *   strio.lineno = integer    -&gt; integer
 *
 * Manually sets the current line number to the given value.
 * &lt;code&gt;$.&lt;/code&gt; is updated only on the next read.
 */
static VALUE
strio_set_lineno(self, lineno)
    VALUE self, lineno;
{
    StringIO(self)-&gt;lineno = NUM2LONG(lineno);
    return lineno;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001297" class="method-detail">
        <a name="M001297"></a>

        <div class="method-heading">
          <a href="#M001297" class="method-signature">
          <span class="method-name"> strio.path &rarr; nil </span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>nil</tt>. Just for compatibility to IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001297-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001297-source">
<pre>
/*
 * Returns +nil+.  Just for compatibility to IO.
 */
static VALUE
strio_nil(self)
    VALUE self;
{
    StringIO(self);
    return Qnil;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001318" class="method-detail">
        <a name="M001318"></a>

        <div class="method-heading">
          <a href="#M001318" class="method-signature">
          <span class="method-name"> strio.pid &rarr; nil </span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>nil</tt>. Just for compatibility to IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001318-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001318-source">
<pre>
/*
 * Returns +nil+.  Just for compatibility to IO.
 */
static VALUE
strio_nil(self)
    VALUE self;
{
    StringIO(self);
    return Qnil;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001290" class="method-detail">
        <a name="M001290"></a>

        <div class="method-heading">
          <a href="#M001290" class="method-signature">
          <span class="method-name">strio.pos     &rarr; integer<br />
strio.tell    &rarr; integer<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the current offset (in bytes) of <b>strio</b>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001290-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001290-source">
<pre>
/*
 * call-seq:
 *   strio.pos     -&gt; integer
 *   strio.tell    -&gt; integer
 *
 * Returns the current offset (in bytes) of *strio*.
 */
static VALUE
strio_get_pos(self)
    VALUE self;
{
    return LONG2NUM(StringIO(self)-&gt;pos);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001291" class="method-detail">
        <a name="M001291"></a>

        <div class="method-heading">
          <a href="#M001291" class="method-signature">
          <span class="method-name">strio.pos = integer    &rarr; integer<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Seeks to the given position (in bytes) in <b>strio</b>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001291-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001291-source">
<pre>
/*
 * call-seq:
 *   strio.pos = integer    -&gt; integer
 *
 * Seeks to the given position (in bytes) in *strio*.
 */
static VALUE
strio_set_pos(self, pos)
    VALUE self;
    VALUE pos;
{
    struct StringIO *ptr = StringIO(self);
    long p = NUM2LONG(pos);
    if (p &lt; 0) {
        error_inval(0);
    }
    ptr-&gt;pos = p;
    ptr-&gt;flags &amp;= ~STRIO_EOF;
    return pos;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001311" class="method-detail">
        <a name="M001311"></a>

        <div class="method-heading">
          <span class="method-name">strio.print()             &rarr; nil<br />
strio.print(obj, ...)     &rarr; nil<br />
</span>
        </div>
      
        <div class="method-description">
          <p>
See IO#print.
</p>
        </div>
      </div>

      <div id="method-M001312" class="method-detail">
        <a name="M001312"></a>

        <div class="method-heading">
          <span class="method-name">strio.printf(format_string [, obj, ...] )   &rarr; nil<br />
</span>
        </div>
      
        <div class="method-description">
          <p>
See IO#printf.
</p>
        </div>
      </div>

      <div id="method-M001313" class="method-detail">
        <a name="M001313"></a>

        <div class="method-heading">
          <a href="#M001313" class="method-signature">
          <span class="method-name">strio.putc(obj)    &rarr; obj<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#putc.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001313-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001313-source">
<pre>
/*
 * call-seq:
 *   strio.putc(obj)    -&gt; obj
 *
 * See IO#putc.
 */
static VALUE
strio_putc(self, ch)
    VALUE self, ch;
{
    struct StringIO *ptr = writable(StringIO(self));
    int c = NUM2CHR(ch);
    long olen;

    check_modifiable(ptr);
    olen = RSTRING(ptr-&gt;string)-&gt;len;
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    strio_extend(ptr, ptr-&gt;pos, 1);
    RSTRING(ptr-&gt;string)-&gt;ptr[ptr-&gt;pos++] = c;
    OBJ_INFECT(ptr-&gt;string, self);
    return ch;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001314" class="method-detail">
        <a name="M001314"></a>

        <div class="method-heading">
          <span class="method-name">strio.puts(obj, ...)    &rarr; nil<br />
</span>
        </div>
      
        <div class="method-description">
          <p>
See IO#puts.
</p>
        </div>
      </div>

      <div id="method-M001307" class="method-detail">
        <a name="M001307"></a>

        <div class="method-heading">
          <a href="#M001307" class="method-signature">
          <span class="method-name">strio.read([length [, buffer]])    &rarr; string, buffer, or nil<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#read.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001307-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001307-source">
<pre>
/*
 * call-seq:
 *   strio.read([length [, buffer]])    -&gt; string, buffer, or nil
 *
 * See IO#read.
 */
static VALUE
strio_read(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    VALUE str = Qnil;
    long len, olen;

    switch (argc) {
      case 2:
        str = argv[1];
        StringValue(str);
        rb_str_modify(str);
      case 1:
        if (!NIL_P(argv[0])) {
            len = olen = NUM2LONG(argv[0]);
            if (len &lt; 0) {
                rb_raise(rb_eArgError, &quot;negative length %ld given&quot;, len);
            }
            if (len &gt; 0 &amp;&amp; ptr-&gt;pos &gt;= RSTRING(ptr-&gt;string)-&gt;len) {
                ptr-&gt;flags |= STRIO_EOF;
                if (!NIL_P(str)) rb_str_resize(str, 0);
                return Qnil;
            }
            else if (ptr-&gt;flags &amp; STRIO_EOF) {
                if (!NIL_P(str)) rb_str_resize(str, 0);
                return Qnil;
            }
            break;
        }
        /* fall through */
      case 0:
        olen = -1;
        len = RSTRING(ptr-&gt;string)-&gt;len;
        if (len &lt;= ptr-&gt;pos) {
            ptr-&gt;flags |= STRIO_EOF;
            if (NIL_P(str)) {
                str = rb_str_new(0, 0);
            }
            else {
                rb_str_resize(str, 0);
            }
            return str;
        }
        else {
            len -= ptr-&gt;pos;
        }
        break;
      default:
        rb_raise(rb_eArgError, &quot;wrong number of arguments (%d for 0)&quot;, argc);
    }
    if (NIL_P(str)) {
        str = rb_str_substr(ptr-&gt;string, ptr-&gt;pos, len);
    }
    else {
        long rest = RSTRING(ptr-&gt;string)-&gt;len - ptr-&gt;pos;
        if (len &gt; rest) len = rest;
        rb_str_resize(str, len);
        MEMCPY(RSTRING(str)-&gt;ptr, RSTRING(ptr-&gt;string)-&gt;ptr + ptr-&gt;pos, char, len);
    }
    if (NIL_P(str)) {
        if (!(ptr-&gt;flags &amp; STRIO_EOF)) str = rb_str_new(0, 0);
        len = 0;
    }
    else {
        ptr-&gt;pos += len = RSTRING(str)-&gt;len;
    }
    if (olen &lt; 0 || olen &gt; len) ptr-&gt;flags |= STRIO_EOF;
    return str;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001303" class="method-detail">
        <a name="M001303"></a>

        <div class="method-heading">
          <a href="#M001303" class="method-signature">
          <span class="method-name">strio.readchar   &rarr; fixnum<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#readchar.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001303-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001303-source">
<pre>
/*
 * call-seq:
 *   strio.readchar   -&gt; fixnum
 *
 * See IO#readchar.
 */
static VALUE
strio_readchar(self)
    VALUE self;
{
    VALUE c = strio_getc(self);
    if (NIL_P(c)) rb_eof_error();
    return c;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001305" class="method-detail">
        <a name="M001305"></a>

        <div class="method-heading">
          <a href="#M001305" class="method-signature">
          <span class="method-name">strio.readline(sep_string=$/)   &rarr; string<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#readline.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001305-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001305-source">
<pre>
/*
 * call-seq:
 *   strio.readline(sep_string=$/)   -&gt; string
 *
 * See IO#readline.
 */
static VALUE
strio_readline(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE line = strio_gets(argc, argv, self);
    if (NIL_P(line)) rb_eof_error();
    return line;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001306" class="method-detail">
        <a name="M001306"></a>

        <div class="method-heading">
          <a href="#M001306" class="method-signature">
          <span class="method-name">strio.readlines(sep_string=$/)  &rarr;   array<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See IO#readlines.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001306-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001306-source">
<pre>
/*
 * call-seq:
 *   strio.readlines(sep_string=$/)  -&gt;   array
 *
 * See IO#readlines.
 */
static VALUE
strio_readlines(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    VALUE ary = rb_ary_new(), line;
    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_ary_push(ary, line);
    }
    return ary;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001273" class="method-detail">
        <a name="M001273"></a>

        <div class="method-heading">
          <a href="#M001273" class="method-signature">
          <span class="method-name">strio.reopen(other_StrIO)     &rarr; strio<br />
strio.reopen(string, mode)    &rarr; strio<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Reinitializes <b>strio</b> with the given <em>other_StrIO</em> or <em><a
href="StringIO.html#M001274">string</a></em> and <em>mode</em> (see <a
href="StringIO.html#M001272">StringIO#new</a>).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001273-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001273-source">
<pre>
/*
 * call-seq:
 *   strio.reopen(other_StrIO)     -&gt; strio
 *   strio.reopen(string, mode)    -&gt; strio
 *
 * Reinitializes *strio* with the given &lt;i&gt;other_StrIO&lt;/i&gt; or _string_ 
 * and _mode_ (see StringIO#new).
 */
static VALUE
strio_reopen(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    if (!OBJ_TAINTED(self)) rb_secure(4);
    if (argc == 1 &amp;&amp; TYPE(*argv) != T_STRING) {
        return strio_copy(self, *argv);
    }
    strio_init(argc, argv, StringIO(self));
    return self;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001292" class="method-detail">
        <a name="M001292"></a>

        <div class="method-heading">
          <a href="#M001292" class="method-signature">
          <span class="method-name">strio.rewind    &rarr; 0<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Positions <b>strio</b> to the beginning of input, resetting <tt><a
href="StringIO.html#M001276">lineno</a></tt> to zero.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001292-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001292-source">
<pre>
/*
 * call-seq:
 *   strio.rewind    -&gt; 0
 *
 * Positions *strio* to the beginning of input, resetting
 * +lineno+ to zero.
 */
static VALUE
strio_rewind(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    ptr-&gt;pos = 0;
    ptr-&gt;lineno = 0;
    ptr-&gt;flags &amp;= ~STRIO_EOF;
    return INT2FIX(0);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001293" class="method-detail">
        <a name="M001293"></a>

        <div class="method-heading">
          <a href="#M001293" class="method-signature">
          <span class="method-name">strio.seek(amount, whence=SEEK_SET) &rarr; 0<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Seeks to a given offset <em>amount</em> in the stream according to the
value of <em>whence</em> (see IO#seek).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001293-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001293-source">
<pre>
/*
 * call-seq:
 *   strio.seek(amount, whence=SEEK_SET) -&gt; 0
 *
 * Seeks to a given offset _amount_ in the stream according to
 * the value of _whence_ (see IO#seek).
 */
static VALUE
strio_seek(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE whence;
    struct StringIO *ptr = StringIO(self);
    long offset;

    rb_scan_args(argc, argv, &quot;11&quot;, NULL, &amp;whence);
    offset = NUM2LONG(argv[0]);
    switch (NIL_P(whence) ? 0 : NUM2LONG(whence)) {
      case 0:
        break;
      case 1:
        offset += ptr-&gt;pos;
        break;
      case 2:
        offset += RSTRING(ptr-&gt;string)-&gt;len;
        break;
      default:
        rb_raise(rb_eArgError, &quot;invalid whence %ld&quot;, NUM2LONG(whence));
    }
    if (offset &lt; 0) {
        error_inval(0);
    }
    ptr-&gt;pos = offset;
    ptr-&gt;flags &amp;= ~STRIO_EOF;
    return INT2FIX(0);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001320" class="method-detail">
        <a name="M001320"></a>

        <div class="method-heading">
          <a href="#M001320" class="method-signature">
          <span class="method-name">strio.size   &rarr; integer<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="StringIO.html#M001320">size</a> of the buffer <a
href="StringIO.html#M001274">string</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001320-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001320-source">
<pre>
/*
 * call-seq:
 *   strio.size   -&gt; integer
 *
 * Returns the size of the buffer string.
 */
static VALUE
strio_size(self)
    VALUE self;
{
    VALUE string = StringIO(self)-&gt;string;
    if (NIL_P(string)) {
        rb_raise(rb_eIOError, &quot;not opened&quot;);
    }
    return ULONG2NUM(RSTRING(string)-&gt;len);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001274" class="method-detail">
        <a name="M001274"></a>

        <div class="method-heading">
          <a href="#M001274" class="method-signature">
          <span class="method-name"> strio.string     &rarr; string<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns underlying String object, the subject of IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001274-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001274-source">
<pre>
/*
 * call-seq: strio.string     -&gt; string
 *
 * Returns underlying String object, the subject of IO.
 */
static VALUE
strio_get_string(self)
    VALUE self;
{
    return StringIO(self)-&gt;string;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001275" class="method-detail">
        <a name="M001275"></a>

        <div class="method-heading">
          <a href="#M001275" class="method-signature">
          <span class="method-name">strio.string = string  &rarr; string<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Changes underlying String object, the subject of IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001275-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001275-source">
<pre>
/*
 * call-seq:
 *   strio.string = string  -&gt; string
 *
 * Changes underlying String object, the subject of IO.
 */
static VALUE
strio_set_string(self, string)
    VALUE self, string;
{
    struct StringIO *ptr = StringIO(self);

    if (!OBJ_TAINTED(self)) rb_secure(4);
    ptr-&gt;flags &amp;= ~FMODE_READWRITE;
    StringValue(string);
    ptr-&gt;flags = OBJ_FROZEN(string) ? FMODE_READABLE : FMODE_READWRITE;
    ptr-&gt;pos = 0;
    ptr-&gt;lineno = 0;
    return ptr-&gt;string = string;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001294" class="method-detail">
        <a name="M001294"></a>

        <div class="method-heading">
          <a href="#M001294" class="method-signature">
          <span class="method-name">strio.sync    &rarr; true<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>true</tt> always.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001294-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001294-source">
<pre>
/*
 * call-seq:
 *   strio.sync    -&gt; true
 *
 * Returns +true+ always.
 */
static VALUE
strio_get_sync(self)
    VALUE self;
{
    StringIO(self);
    return Qtrue;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001295" class="method-detail">
        <a name="M001295"></a>

        <div class="method-heading">
          <a href="#M001295" class="method-signature">
          <span class="method-name"> strio.sync = boolean &rarr; boolean </span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the argument unchanged. Just for compatibility to IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001295-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001295-source">
<pre>
/*
 * Returns the argument unchanged.  Just for compatibility to IO.
 */
static VALUE
strio_first(self, arg)
    VALUE self, arg;
{
    StringIO(self);
    return arg;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001308" class="method-detail">
        <a name="M001308"></a>

        <div class="method-heading">
          <a href="#M001308" class="method-signature">
          <span class="method-name">strio.sysread(integer[, outbuf])    &rarr; string<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Similar to <a href="StringIO.html#M001307">read</a>, but raises
<tt>EOFError</tt> at end of <a href="StringIO.html#M001274">string</a>
instead of returning <tt>nil</tt>, as well as IO#sysread does.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001308-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001308-source">
<pre>
/*
 * call-seq:
 *   strio.sysread(integer[, outbuf])    -&gt; string
 *
 * Similar to #read, but raises +EOFError+ at end of string instead of
 * returning +nil+, as well as IO#sysread does.
 */
static VALUE
strio_sysread(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE val = strio_read(argc, argv, self);
    if (NIL_P(val) || RSTRING(val)-&gt;len == 0) {
        rb_eof_error();
    }
    return val;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001315" class="method-detail">
        <a name="M001315"></a>

        <div class="method-heading">
          <a href="#M001315" class="method-signature">
          <span class="method-name">strio.write(string)    &rarr; integer<br />
strio.syswrite(string) &rarr; integer<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Appends the given <a href="StringIO.html#M001274">string</a> to the
underlying buffer <a href="StringIO.html#M001274">string</a> of
<b>strio</b>. The stream must be opened for writing. If the argument is not
a <a href="StringIO.html#M001274">string</a>, it will be converted to a <a
href="StringIO.html#M001274">string</a> using <tt>to_s</tt>. Returns the
number of bytes written. See IO#write.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001315-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001315-source">
<pre>
/*
 * call-seq:
 *   strio.write(string)    -&gt; integer
 *   strio.syswrite(string) -&gt; integer
 *
 * Appends the given string to the underlying buffer string of *strio*.
 * The stream must be opened for writing.  If the argument is not a
 * string, it will be converted to a string using &lt;code&gt;to_s&lt;/code&gt;.
 * Returns the number of bytes written.  See IO#write.
 */
static VALUE
strio_write(self, str)
    VALUE self, str;
{
    struct StringIO *ptr = writable(StringIO(self));
    long len, olen;

    if (TYPE(str) != T_STRING)
        str = rb_obj_as_string(str);
    len = RSTRING(str)-&gt;len;
    if (!len) return INT2FIX(0);
    check_modifiable(ptr);
    olen = RSTRING(ptr-&gt;string)-&gt;len;
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    if (ptr-&gt;pos == olen) {
        rb_str_cat(ptr-&gt;string, RSTRING(str)-&gt;ptr, len);
    }
    else {
        strio_extend(ptr, ptr-&gt;pos, len);
        rb_str_update(ptr-&gt;string, ptr-&gt;pos, len, str);
    }
    OBJ_INFECT(ptr-&gt;string, self);
    ptr-&gt;pos += len;
    return LONG2NUM(len);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001296" class="method-detail">
        <a name="M001296"></a>

        <div class="method-heading">
          <a href="#M001296" class="method-signature">
          <span class="method-name">strio.pos     &rarr; integer<br />
strio.tell    &rarr; integer<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the current offset (in bytes) of <b>strio</b>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001296-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001296-source">
<pre>
/*
 * call-seq:
 *   strio.pos     -&gt; integer
 *   strio.tell    -&gt; integer
 *
 * Returns the current offset (in bytes) of *strio*.
 */
static VALUE
strio_get_pos(self)
    VALUE self;
{
    return LONG2NUM(StringIO(self)-&gt;pos);
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001322" class="method-detail">
        <a name="M001322"></a>

        <div class="method-heading">
          <a href="#M001322" class="method-signature">
          <span class="method-name">strio.truncate(integer)    &rarr; 0<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Truncates the buffer <a href="StringIO.html#M001274">string</a> to at most
<em>integer</em> bytes. The <b>strio</b> must be opened for writing.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001322-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001322-source">
<pre>
/*
 * call-seq:
 *   strio.truncate(integer)    -&gt; 0
 *
 * Truncates the buffer string to at most _integer_ bytes. The *strio*
 * must be opened for writing.
 */
static VALUE
strio_truncate(self, len)
    VALUE self, len;
{
    VALUE string = writable(StringIO(self))-&gt;string;
    long l = NUM2LONG(len);
    long plen = RSTRING(string)-&gt;len;
    if (l &lt; 0) {
        error_inval(&quot;negative legnth&quot;);
    }
    rb_str_resize(string, l);
    if (plen &lt; l) {
        MEMZERO(RSTRING(string)-&gt;ptr + plen, char, l - plen);
    }
    return len;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001317" class="method-detail">
        <a name="M001317"></a>

        <div class="method-heading">
          <a href="#M001317" class="method-signature">
          <span class="method-name">strio.isatty &rarr; nil<br />
strio.tty? &rarr; nil<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>false</tt>. Just for compatibility to IO.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001317-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001317-source">
<pre>
/*
 * Returns +false+.  Just for compatibility to IO.
 */
static VALUE
strio_false(self)
    VALUE self;
{
    StringIO(self);
    return Qfalse;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001302" class="method-detail">
        <a name="M001302"></a>

        <div class="method-heading">
          <a href="#M001302" class="method-signature">
          <span class="method-name">strio.ungetc(integer)   &rarr; nil<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Pushes back one character (passed as a parameter) onto <b>strio</b> such
that a subsequent buffered <a href="StringIO.html#M001307">read</a> will
return it. Pushing back behind the beginning of the buffer <a
href="StringIO.html#M001274">string</a> is not possible. Nothing will be
done if such an attempt is made. In other case, there is no limitation for
multiple pushbacks.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001302-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001302-source">
<pre>
/*
 * call-seq:
 *   strio.ungetc(integer)   -&gt; nil
 *
 * Pushes back one character (passed as a parameter) onto *strio*
 * such that a subsequent buffered read will return it.  Pushing back 
 * behind the beginning of the buffer string is not possible.  Nothing
 * will be done if such an attempt is made.
 * In other case, there is no limitation for multiple pushbacks.
 */
static VALUE
strio_ungetc(self, ch)
    VALUE self, ch;
{
    struct StringIO *ptr = readable(StringIO(self));
    int cc = NUM2INT(ch);
    long len, pos = ptr-&gt;pos;

    if (cc != EOF) {
        len = RSTRING(ptr-&gt;string)-&gt;len;
        if (pos == 0) {
            char *p;
            rb_str_resize(ptr-&gt;string, len + 1);
            p = RSTRING(ptr-&gt;string)-&gt;ptr;
            memmove(p + 1, p, len);
        }
        else {
            if (len &lt; pos-- ||
                (unsigned char)RSTRING(ptr-&gt;string)-&gt;ptr[pos] !=
                (unsigned char)cc) {
                strio_extend(ptr, pos, 1);
            }
            --ptr-&gt;pos;
        }
        RSTRING(ptr-&gt;string)-&gt;ptr[pos] = cc;
        OBJ_INFECT(ptr-&gt;string, self);
        ptr-&gt;flags &amp;= ~STRIO_EOF;
    }
    return Qnil;
}
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001309" class="method-detail">
        <a name="M001309"></a>

        <div class="method-heading">
          <a href="#M001309" class="method-signature">
          <span class="method-name">strio.write(string)    &rarr; integer<br />
strio.syswrite(string) &rarr; integer<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Appends the given <a href="StringIO.html#M001274">string</a> to the
underlying buffer <a href="StringIO.html#M001274">string</a> of
<b>strio</b>. The stream must be opened for writing. If the argument is not
a <a href="StringIO.html#M001274">string</a>, it will be converted to a <a
href="StringIO.html#M001274">string</a> using <tt>to_s</tt>. Returns the
number of bytes written. See IO#write.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001309-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001309-source">
<pre>
/*
 * call-seq:
 *   strio.write(string)    -&gt; integer
 *   strio.syswrite(string) -&gt; integer
 *
 * Appends the given string to the underlying buffer string of *strio*.
 * The stream must be opened for writing.  If the argument is not a
 * string, it will be converted to a string using &lt;code&gt;to_s&lt;/code&gt;.
 * Returns the number of bytes written.  See IO#write.
 */
static VALUE
strio_write(self, str)
    VALUE self, str;
{
    struct StringIO *ptr = writable(StringIO(self));
    long len, olen;

    if (TYPE(str) != T_STRING)
        str = rb_obj_as_string(str);
    len = RSTRING(str)-&gt;len;
    if (!len) return INT2FIX(0);
    check_modifiable(ptr);
    olen = RSTRING(ptr-&gt;string)-&gt;len;
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    if (ptr-&gt;pos == olen) {
        rb_str_cat(ptr-&gt;string, RSTRING(str)-&gt;ptr, len);
    }
    else {
        strio_extend(ptr, ptr-&gt;pos, len);
        rb_str_update(ptr-&gt;string, ptr-&gt;pos, len, str);
    }
    OBJ_INFECT(ptr-&gt;string, self);
    ptr-&gt;pos += len;
    return LONG2NUM(len);
}
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>